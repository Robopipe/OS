# Unipi Patron - S107, S117, S167, M207, M527, M267, M567, L207, L527
# Unipi Neuron - ALL
# 4x DI, 4x DO, 1x AI, 1x AO, 4x ULED
# File version: 1.1
# Min. EVOK version: 3.0
# Min. firmware version: 5.50
---

# Modbus communication definition (read)
modbus_register_blocks:

    # DI, DO / 20ms
    - start_reg   : 0
      count       : 2
      frequency   : 1

    # MWD status / 5s
    - start_reg   : 6
      count       : 1
      frequency   : 250

    # CNT, PWM / 1s
    - start_reg   : 8
      count       : 12
      frequency   : 50

    # ULED / 5s
    - start_reg   : 20
      count       : 1
      frequency   : 250

    # Configuration / 5s
    - start_reg   : 1008
      count       : 17
      frequency   : 250

    # AI, AO / 1000ms
    - start_reg   : 3000
      count       : 6
      frequency   : 50

# Device features definition
modbus_features:

    # Digital inputs
    - type        : DI
      count       : 4
      modes       :
        - Simple
        - DirectSwitch
      ds_modes    :
        - Simple
        - Inverted
        - Toggle
      min_v       : 5
      max_v       : 24
      val_reg     : 0
      counter_reg : 8
      direct_reg  : 1014
      deboun_reg  : 1010
      polar_reg   : 1015
      toggle_reg  : 1016

    # Relay outputs
    - type        : DO
      count       : 4
      modes       :
        - Simple
        - PWM
      val_reg     : 1
      val_coil    : 0
      pwm_reg     : 16
      pwm_ps_reg  : 1017
      pwm_c_reg   : 1018

    # Analog inputs
    - type        : AI
      count       : 1
      modes       :
        Voltage:
          value: 0
          unit: 'V'
          range: [0, 10]
        Current:
          value: 1
          unit: 'mA'
          range: [0, 20]
      val_reg     : 3002
      mode_reg    : 1024

    # Analog output (AOR)
    - type        : BAO
      count       : 1
      val_reg     : 3000
      res_val_reg : 3004
      mode_reg    : 1019

    # User LEDs
    - type        : LED
      count       : 4
      val_coil    : 8
      val_reg     : 20

    # OneWire power (reset)
    - type        : OWPOWER
      val_coil    : 1001

    # Master Watchdog (MWD) & configuration
    - type        : WD
      count       : 1
      val_reg     : 6
      timeout_reg : 1008
      nv_sav_coil : 1003
      reset_coil  : 1002

  # Non-volatile memory saver
    - type: NV_SAVE
      val_coil: 1003
